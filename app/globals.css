@import "tailwindcss";

:root {
  --background: #eeeeec;
  --foreground: #191919;
  --card-active: rgba(59, 130, 246, 0.1);
  --card-light: #fafaf9;
  --card-dark: #292927;
  --card-tag: rgba(59, 130, 246, 1);
  --card-tag-text: #eeeeec;
  --card-upcoming: rgba(253, 153, 0, 0.03);
  --card-upcoming-dark: rgba(253, 153, 0, 0.15);
  --card-overdue: rgba(250, 43, 54, 0.03);
  --card-overdue-dark: rgba(250, 43, 54, 0.15);
  --card-highlight-light: #ebe7e4;
  --card-highlight-dark: #333330;
  --selected-background: #e0e0e0;
  --selected-foreground: #191919;
  --selected-active: rgba(59, 130, 246, 0.1);
  --theme-lightest: #fafaf9;
  --theme-lighter: #ebe7e4;
  --theme-light: #d4d1cc;
  --theme-medium: #8d8a85;
  --theme-dark: #585550;
  --theme-darker: #292927;
  --theme-darkest: #191919;

  /* SURFACES (semantic) */
  --surface-modal: var(--card-light);
  --surface-panel: var(--theme-lightest);
  --surface-bar: var(--theme-lighter);
  --surface-hover: rgba(25, 25, 25, 0.06);

  /* BORDERS / DIVIDERS */
  --border-subtle: rgba(25, 25, 25, 0.10);
  --border-strong: rgba(25, 25, 25, 0.18);
  --divider: rgba(25, 25, 25, 0.08);

  /* TEXT */
  --text-muted: var(--theme-dark);
  --text-faint: var(--theme-medium);

  /* LINKS (keep brand feel but reduce "neon") */
  --link: rgba(59, 130, 246, 0.95);
  --link-hover: rgba(59, 130, 246, 1);

  /* FOCUS */
  --focus-ring: rgba(59, 130, 246, 0.35);

  /* SHADOWS */
  --shadow-modal: 0 16px 48px rgba(0, 0, 0, 0.25);
  --shadow-menu: 0 10px 24px rgba(0, 0, 0, 0.22);

  /* STATUS CHIP BACKGROUNDS (use your existing card tints) */
  --chip-warning-bg: var(--card-upcoming-dark);
  --chip-danger-bg: var(--card-overdue-dark);
  --chip-neutral-bg: var(--card-highlight-light);
}

/* Dark theme via data attribute (manual override) */
[data-theme='dark'] {
  --background: #191919;
  --foreground: #eeeeec;
  --card-active: rgba(59, 130, 246, 0.1);
  --card-light: #292927;
  --card-dark: #fafaf9;
  --card-tag: rgba(59, 130, 246, 1);
  --card-tag-text: #eeeeec;
  --card-upcoming: rgba(253, 153, 0, 0.03);
  --card-upcoming-dark: rgba(253, 153, 0, 0.15);
  --card-overdue: rgba(250, 43, 54, 0.03);
  --card-overdue-dark: rgba(250, 43, 54, 0.15);
  --card-highlight-light: #333330;
  --card-highlight-dark: #ebe7e4;
  --selected-background: #333330;
  --selected-foreground: #fafaf9;
  --selected-active: rgba(59, 130, 246, 0.1);
  --theme-lightest: #191919;
  --theme-lighter: #292927;
  --theme-light: #585550;
  --theme-medium: #8d8a85;
  --theme-dark: #d4d1cc;
  --theme-darker: #ebe7e4;
  --theme-darkest: #fafaf9;

  /* SURFACES */
  --surface-modal: var(--theme-lighter);
  --surface-panel: rgba(255, 255, 255, 0.04);
  --surface-bar: rgba(255, 255, 255, 0.06);
  --surface-hover: rgba(255, 255, 255, 0.06);

  /* BORDERS / DIVIDERS (IMPORTANT: softer in dark) */
  --border-subtle: rgba(255, 255, 255, 0.10);
  --border-strong: rgba(255, 255, 255, 0.16);
  --divider: rgba(255, 255, 255, 0.08);

  /* TEXT */
  --text-muted: rgba(238, 238, 236, 0.78);
  --text-faint: rgba(238, 238, 236, 0.62);

  /* LINKS (dim slightly in dark mode so they don't compete with CTAs) */
  --link: rgba(147, 197, 253, 0.92);
  --link-hover: rgba(147, 197, 253, 1);

  /* FOCUS */
  --focus-ring: rgba(59, 130, 246, 0.40);

  /* SHADOWS */
  --shadow-modal: 0 18px 52px rgba(0, 0, 0, 0.55);
  --shadow-menu: 0 12px 28px rgba(0, 0, 0, 0.60);

  /* STATUS CHIP BACKGROUNDS */
  --chip-warning-bg: var(--card-upcoming-dark);
  --chip-danger-bg: var(--card-overdue-dark);
  --chip-neutral-bg: var(--card-highlight-light);
}

/* Dark theme via browser preference (when no manual override) */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --background: #191919;
    --foreground: #eeeeec;
    --card-active: rgba(59, 130, 246, 0.1);
    --card-light: #292927;
    --card-dark: #fafaf9;
    --card-tag: rgba(59, 130, 246, 1);
    --card-tag-text: #eeeeec;
    --card-upcoming: rgba(253, 153, 0, 0.03);
    --card-upcoming-dark: rgba(253, 153, 0, 0.15);
    --card-overdue: rgba(250, 43, 54, 0.03);
    --card-overdue-dark: rgba(250, 43, 54, 0.15);
    --card-highlight-light: #333330;
    --card-highlight-dark: #ebe7e4;
    --selected-background: #333330;
    --selected-foreground: #fafaf9;
    --selected-active: rgba(59, 130, 246, 0.1);
    --theme-lightest: #191919;
    --theme-lighter: #292927;
    --theme-light: #585550;
    --theme-medium: #8d8a85;
  --theme-dark: #d4d1cc;
  --theme-darker: #ebe7e4;
  --theme-darkest: #fafaf9;

  /* SURFACES */
  --surface-modal: var(--theme-lighter);
  --surface-panel: rgba(255, 255, 255, 0.04);
  --surface-bar: rgba(255, 255, 255, 0.06);
  --surface-hover: rgba(255, 255, 255, 0.06);

  /* BORDERS / DIVIDERS (IMPORTANT: softer in dark) */
  --border-subtle: rgba(255, 255, 255, 0.10);
  --border-strong: rgba(255, 255, 255, 0.16);
  --divider: rgba(255, 255, 255, 0.08);

  /* TEXT */
  --text-muted: rgba(238, 238, 236, 0.78);
  --text-faint: rgba(238, 238, 236, 0.62);

  /* LINKS (dim slightly in dark mode so they don't compete with CTAs) */
  --link: rgba(147, 197, 253, 0.92);
  --link-hover: rgba(147, 197, 253, 1);

  /* FOCUS */
  --focus-ring: rgba(59, 130, 246, 0.40);

  /* SHADOWS */
  --shadow-modal: 0 18px 52px rgba(0, 0, 0, 0.55);
  --shadow-menu: 0 12px 28px rgba(0, 0, 0, 0.60);

  /* STATUS CHIP BACKGROUNDS */
  --chip-warning-bg: var(--card-upcoming-dark);
  --chip-danger-bg: var(--card-overdue-dark);
  --chip-neutral-bg: var(--card-highlight-light);
  }
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card-active: var(--card-active);
  --color-card-light: var(--card-light);
  --color-card-dark: var(--card-dark);
  --color-card-tag: var(--card-tag);
  --color-card-tag-text: var(--card-tag-text);
  --color-card-upcoming: var(--card-upcoming);
  --color-card-upcoming-dark: var(--card-upcoming-dark);
  --color-card-overdue: var(--card-overdue);
  --color-card-overdue-dark: var(--card-overdue-dark);
  --color-card-highlight-light: var(--card-highlight-light);
  --color-card-highlight-dark: var(--card-highlight-dark);
  --color-theme-lightest: var(--theme-lightest);
  --color-selected-background: var(--selected-background);
  --color-selected-foreground: var(--selected-foreground);
  --color-selected-active: var(--selected-active);
  --color-theme-lighter: var(--theme-lighter);
  --color-theme-light: var(--theme-light);
  --color-theme-medium: var(--theme-medium);
  --color-theme-dark: var(--theme-dark);
  --color-theme-darker: var(--theme-darker);
  --color-theme-darkest: var(--theme-darkest);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

html {
  height: 100%;
  margin: 0;
  padding: 0;
  background: #ffffff;
}

body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
  overflow: hidden;
}

@keyframes progress-bar-shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(200%);
  }
}

.animate-progress-bar {
  position: relative;
  overflow: hidden;
}

.animate-progress-bar::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.4),
    transparent
  );
  animation: progress-bar-shimmer 1.5s ease-in-out infinite;
}

/* Style the calendar picker icon to match theme colors */
input[type="date"]::-webkit-calendar-picker-indicator {
  cursor: pointer;
  /* Use theme-darkest color for light mode - native icon is black, so we keep it */
  filter: brightness(0) saturate(100%) invert(0%);
  opacity: 0.7;
  transition: all 0.2s ease;
  padding: 0.25rem;
  border-radius: 0.25rem;
}

/* Dark theme adjustments for calendar icon */
[data-theme='dark'] input[type="date"]::-webkit-calendar-picker-indicator {
  /* In dark mode, invert to make icon light (theme-darkest in dark = light color) */
  filter: brightness(0) saturate(100%) invert(100%);
  opacity: 0.8;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) input[type="date"]::-webkit-calendar-picker-indicator {
    filter: brightness(0) saturate(100%) invert(100%);
    opacity: 0.8;
  }
  
  :root:not([data-theme]) input[type="date"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
    background-color: var(--theme-medium);
    filter: brightness(0) saturate(100%) invert(100%);
  }
}

/* Style date input text parts */
input[type="date"]::-webkit-datetime-edit-text {
  color: var(--foreground);
  padding: 0 0.25em;
}

input[type="date"]::-webkit-datetime-edit-month-field,
input[type="date"]::-webkit-datetime-edit-day-field,
input[type="date"]::-webkit-datetime-edit-year-field {
  color: var(--foreground);
  padding: 0 0.25em;
}

input[type="date"]::-webkit-datetime-edit-month-field:focus,
input[type="date"]::-webkit-datetime-edit-day-field:focus,
input[type="date"]::-webkit-datetime-edit-year-field:focus {
  background-color: var(--theme-light);
  color: var(--foreground);
  border-radius: 0.25rem;
}

/* Firefox date input styling */
input[type="date"] {
  color-scheme: light;
}

[data-theme='dark'] input[type="date"] {
  color-scheme: dark;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) input[type="date"] {
    color-scheme: dark;
  }
}
